"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[610],{610:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var n=r(439),c=r(791),a=r(689),s=r(87),i=r(128),o=r(184);function u(e){var t=e.to,r=e.children;return(0,o.jsxs)(s.rU,{to:t,children:[(0,o.jsx)(i.jTe,{size:"24"}),r]})}var h=r(321),l=new(r(910).Z);function f(){var e=(0,c.useState)({}),t=(0,n.Z)(e,2),r=t[0],i=t[1],f=(0,c.useState)("idle"),v=(0,n.Z)(f,2),p=v[0],d=v[1],g=(0,a.UO)().movieId,x=(0,a.TH)(),k=(0,c.useRef)(x);(0,c.useEffect)((function(){d("pending"),l.movieId=g,l.fetchDetails().then((function(e){d("resolved"),i(e)})).catch(console.log)}),[g]);var y=r.original_title,w=r.poster_path,m=r.vote_average,j=r.overview,b=r.genres;return"pending"===p?(0,o.jsx)(h.Z,{}):"resolved"===p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u,{to:k.current.state,children:(0,o.jsx)("button",{children:"Back to movies"})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("img",{src:"https://image.tmdb.org/t/p/w400/".concat(w),alt:""}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:y}),(0,o.jsxs)("li",{children:["User score: ",(10*m).toFixed(0),"%"]}),(0,o.jsxs)("li",{children:["Overview: ",j]}),(0,o.jsxs)("li",{children:["Genres:",(0,o.jsx)("ul",{children:b.map((function(e){var t=e.name;return(0,o.jsx)("li",{children:t},t)}))})]})]})]}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:(0,o.jsx)(s.rU,{to:"cast",children:"Cast"})}),(0,o.jsx)("li",{children:(0,o.jsx)(s.rU,{to:"reviews",children:"Reviews"})})]}),(0,o.jsx)(c.Suspense,{fallback:(0,o.jsx)(h.Z,{}),children:(0,o.jsx)(a.j3,{})})]}):void 0}},910:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(861),c=r(671),a=r(144),s=r(757),i=r.n(s),o=r(686),u=r.n(o),h="https://api.themoviedb.org/",l="604d147cd55c0bcd03b68a72549a64de",f=function(){function e(){(0,c.Z)(this,e),this.searchQuery="avatar",this.page=1,this.getMovieId=""}return(0,a.Z)(e,[{key:"fetchMovies",value:function(){var e=(0,n.Z)(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"3/search/movie?api_key=").concat(l,"&query=").concat(this.searchQuery,"&page=").concat(this.page,"&language=en-US&include_adult=false"));case 3:if((t=e.sent).ok){e.next=8;break}if(404!==t.status){e.next=7;break}throw new Error(u().Notify.failure("Search result not successful. Try again"));case 7:return e.abrupt("return");case 8:return e.next=10,t.json();case 10:if(r=e.sent,0!==(n=r.results).length){e.next=15;break}return u().Notify.failure("Search result not successful. Enter the correct movie name."),e.abrupt("return");case 15:return e.abrupt("return",n);case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrending",value:function(){var e=(0,n.Z)(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"3/trending/movie/week?api_key=").concat(l,"&page=").concat(this.page,"&language=en-US"));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error(u().Notify.failure("Failed to fetch trending movies"));case 6:return e.next=8,t.json();case 8:return r=e.sent,n=r.results,e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDetails",value:function(){var e=(0,n.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"3/movie/").concat(this.getMovieId,"?api_key=").concat(l,"&language=en-US"));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error(u().Notify.failure("Failed to fetch movie details"));case 6:return e.next=8,t.json();case 8:return r=e.sent,e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCast",value:function(){var e=(0,n.Z)(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"3/movie/").concat(this.getMovieId,"/credits?api_key=").concat(l));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error(u().Notify.failure("Failed to fetch movie details"));case 6:return e.next=8,t.json();case 8:return r=e.sent,n=r.cast,e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchReviews",value:function(){var e=(0,n.Z)(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h,"3/movie/").concat(this.getMovieId,"/reviews?api_key=").concat(l));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error(u().Notify.failure("Failed to fetch movie details"));case 6:return e.next=8,t.json();case 8:return r=e.sent,n=r.results,e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"incrementPage",value:function(){this.page=this.page+1}},{key:"decrementPage",value:function(){this.page=this.page-1}},{key:"resetPage",value:function(){this.page=1}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"movieId",get:function(){return this.getMovieId},set:function(e){this.getMovieId=e}},{key:"moviePage",get:function(){return this.page},set:function(e){this.page=e}}]),e}()}}]);
//# sourceMappingURL=610.5174237f.chunk.js.map